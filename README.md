# Diia Backend System

Backend —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è iOS –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É Diia, –≤–∫–ª—é—á–∞—î:
- ü§ñ Telegram –±–æ—Ç –¥–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
- üîê API —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
- üìä –ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å Python 3.9+
2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
```bash
pip install -r requirements.txt
```

3. –°—Ç–≤–æ—Ä—ñ—Ç—å `.env` —Ñ–∞–π–ª (–∞–±–æ —Å–∫–æ–ø—ñ—é–π—Ç–µ `.env.example`):
```bash
cp .env.example .env
```

4. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –ø–∞–ø–∫–∏:
```bash
mkdir -p database uploads/photos
```

## –ó–∞–ø—É—Å–∫

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ API —Å–µ—Ä–≤–µ—Ä:
```bash
python -m api.main
```
API –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–µ –Ω–∞ `http://localhost:8000`

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ Telegram –±–æ—Ç:
```bash
python -m bot.bot
```

### 3. –í—ñ–¥–∫—Ä–∏—Ç–∏ –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å:
–í—ñ–¥–∫—Ä–∏–π—Ç–µ `admin/index.html` –≤ –±—Ä–∞—É–∑–µ—Ä—ñ –∞–±–æ –∑–∞–ø—É—Å—Ç—ñ—Ç—å –ø—Ä–æ—Å—Ç–∏–π HTTP —Å–µ—Ä–≤–µ—Ä:
```bash
cd admin
python -m http.server 8080
```
–ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ `http://localhost:8080`

**–õ–æ–≥—ñ–Ω:** admin  
**–ü–∞—Ä–æ–ª—å:** admin123

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
DiiaBackend/
‚îú‚îÄ‚îÄ api/                  # FastAPI —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ main.py          # API endpoints
‚îú‚îÄ‚îÄ bot/                 # Telegram –±–æ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ bot.py          # –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ handlers.py     # –û–±—Ä–æ–±–Ω–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îú‚îÄ‚îÄ database/            # –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
‚îÇ   ‚îî‚îÄ‚îÄ models.py       # –ú–æ–¥–µ–ª—ñ —Ç–∞ –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑ –ë–î
‚îú‚îÄ‚îÄ admin/              # –ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å
‚îÇ   ‚îî‚îÄ‚îÄ index.html      # –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ uploads/            # –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ —Ñ–∞–π–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ photos/         # –§–æ—Ç–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
‚îú‚îÄ‚îÄ requirements.txt    # Python –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îî‚îÄ‚îÄ .env               # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

```

## API Endpoints

### POST /api/auth/login
–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ iOS –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É
```json
{
  "login": "username",
  "password": "password"
}
```

### GET /api/user/{login}
–û—Ç—Ä–∏–º–∞—Ç–∏ –¥–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

### GET /api/health
–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞–Ω—É —Å–µ—Ä–≤–µ—Ä–∞

## Telegram –ë–æ—Ç

### –ö–æ–º–∞–Ω–¥–∏:
- `/start` - –ü—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è
- `/menu` - –ì–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é
- `/cancel` - –°–∫–∞—Å—É–≤–∞—Ç–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é

### –ü—Ä–æ—Ü–µ—Å —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó:
1. –ü–Ü–ë (—Ñ–æ—Ä–º–∞—Ç: –ü—Ä—ñ–∑–≤–∏—â–µ –Ü–º'—è –ü–æ –±–∞—Ç—å–∫–æ–≤—ñ)
2. –î–∞—Ç–∞ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è (—Ñ–æ—Ä–º–∞—Ç: DD.MM.YYYY, 2000-2014)
3. –§–æ—Ç–æ 3—Ö4
4. –õ–æ–≥—ñ–Ω (4-16 —Å–∏–º–≤–æ–ª—ñ–≤)
5. –ü–∞—Ä–æ–ª—å (4-16 —Å–∏–º–≤–æ–ª—ñ–≤, –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è –ø—ñ—Å–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏)

## –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

SQLite –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –∑–±–µ—Ä—ñ–≥–∞—î:
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- –°–µ—Å—ñ—ó
- –¢–∏–º—á–∞—Å–æ–≤—ñ –¥–∞–Ω—ñ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó

## –ë–µ–∑–ø–µ–∫–∞

- –ü–∞—Ä–æ–ª—ñ —Ö–µ—à—É—é—Ç—å—Å—è –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º bcrypt
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –ø–∞—Ä–æ–ª—è–º–∏ –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è –≤ Telegram
- API –ø—ñ–¥—Ç—Ä–∏–º—É—î CORS –¥–ª—è iOS –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É

## TODO

- [ ] –î–æ–¥–∞—Ç–∏ JWT —Ç–æ–∫–µ–Ω–∏ –¥–ª—è API
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –æ–ø–ª–∞—Ç—É –ø—ñ–¥–ø–∏—Å–∫–∏
- [ ] –î–æ–¥–∞—Ç–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è
- [ ] –î–æ–¥–∞—Ç–∏ email –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∑–º—ñ–Ω—É –ø–∞—Ä–æ–ª—é

